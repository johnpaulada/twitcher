{"version":3,"sources":["main.babel.js"],"names":["STREAMER_LIST","ALL","ONLINE","OFFLINE","TABS","TAB_DECISIONS","TWITCH_URL","USERS_ENDPOINT","STREAMS_ENDPOINT","ENDPOINTS","DEFAULT_AVATAR","StreamerName","_ref","$type","$text","name","class","StatusIcon","_ref2","active","style","$components","StreamerUsername","_ref3","username","StreamerCardTitle","_ref4","StreamingTitle","_ref5","streaming","StreamerBio","_ref6","bio","StreamerInfo","_ref7","StreamerAvatar","_ref8","src","alt","StreamerHeader","_ref9","StreamerCard","_ref10","onclick","window","location","href","StreamerList","$init","this","_list","map","card","Tab","_ref11","_currentFilter","toUpperCase","TabList","tabs","_filters","$update","_this","Object","entries","filter","SearchBar","$cell","id","oninput","e","document","querySelector","_searchFilter","target","value","type","placeholder","zip","a","b","zipped","forEach","v","i","push","assign","getCardData","data","status","message","replace","logo","display_name","stream","channel","App","list","_fullList","_refresh","_this2","Promise","all","endpoint","user","fetch","then","res","json","values","_this3","includes","toLowerCase","search","root"],"mappings":"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","file":"main.babel.js","sourcesContent":["const STREAMER_LIST = ['freecodecamp', 'raynday', 'jepedesu', 'overwatchcontenders', 'brunofin', \"ESL_SC2\", \"OgamingSC2\", \"cretetion\", \"storbeck\", \"habathcx\", \"RobotCaleb\", \"noobs2ninjas\"]\nconst ALL = 'ALL'\nconst ONLINE = 'ONLINE'\nconst OFFLINE = 'OFFLINE'\nconst TABS = {ALL: 'All', ONLINE: 'Online', OFFLINE: 'Offline'}\nconst TAB_DECISIONS = { ALL: [true, true], ONLINE: [true, false], OFFLINE: [false, true] }\nconst TWITCH_URL = 'https://www.twitch.tv'\nconst USERS_ENDPOINT = 'https://wind-bow.glitch.me/twitch-api/users'\nconst STREAMS_ENDPOINT = 'https://wind-bow.glitch.me/twitch-api/streams'\nconst ENDPOINTS = [USERS_ENDPOINT, STREAMS_ENDPOINT]\nconst DEFAULT_AVATAR = 'https://s3-us-west-2.amazonaws.com/web-design-ext-production/p/Glitch_474x356.png'\n\nconst StreamerName = ({name}) => ({\n   $type: 'p',\n   $text: name,\n   class: 'title is-4'\n})\n\nconst StatusIcon = ({active}) => ({\n    $type: 'span',\n    class: 'icon is-small',\n    style: active ? 'color: green' : '',\n    $components: [\n        {$type: 'i', class: `fa fa-circle${(active ? '' : '-o')}`}\n    ]\n})\n\nconst StreamerUsername = ({username, active}) => ({\n    $type: 'p',\n    class: 'subtitle is-6',\n    $components: [\n        {$text: `${username} `, $type: 'span'},\n        StatusIcon({active})\n    ]\n})\n\nconst StreamerCardTitle = ({name, username, active}) => ({\n    class: 'media-content',\n    $components: [StreamerName({name}), StreamerUsername({username, active})]\n})\n\nconst StreamingTitle = ({streaming}) => ({\n    $type: 'p',\n    $components: [\n        {$type: 'strong', $text: streaming || ''}\n    ]\n})\n\nconst StreamerBio = ({bio}) => ({\n    $type: 'p',\n    $components: [\n        {$type: 'em', $text: bio || ''}\n    ]\n})\n\nconst StreamerInfo = ({bio, streaming}) => ({\n    class: 'content',\n    $components: [\n        StreamerBio({bio}),\n        StreamingTitle({streaming})\n    ]\n})\n\nconst StreamerAvatar = ({src, alt}) => ({\n    class: 'media-left',\n    $components: [\n        {$type: 'figure', class: 'image is-48x48', $components: [\n            {$type: 'img', src, alt}\n        ]}\n    ]\n})\n\nconst StreamerHeader = ({name, username, active, src, alt}) => ({\n    class: 'media',\n    $components: [\n        StreamerAvatar({src, alt}),\n        StreamerCardTitle({name, username, active})\n    ]\n})\n\nconst StreamerCard = ({name, username, active, src, alt, bio, streaming}) => ({\n    class: 'card',\n    style: 'cursor: pointer',\n    onclick: () => {window.location.href = `${TWITCH_URL}/${username}`},\n    $components: [\n        {class: 'card-content', $components: [\n            StreamerHeader({name, username, active, src, alt}),\n            StreamerInfo({bio, streaming})\n        ]}\n    ]\n})\n\nconst StreamerList = function() {\n    return {\n        class: 'container',\n        $init: function() {\n            this.$components = this._list.map(card => StreamerCard(card))\n        }\n    }\n}\n\nconst Tab = function({name, active}) {\n  return {\n    $type: 'li',\n    class: active ? 'is-active' : '',\n    onclick: function() {\n      this._currentFilter = name.toUpperCase()\n    },\n    $components: [\n      {$type: 'a', $text: name}\n    ]\n  }\n}\n\nconst TabList = function(tabs) {\n  return {\n    class: 'container',\n    _filters: [],\n    $init: function() {\n      this._filters = tabs\n    },\n    $update: function() {\n      this.$components = [\n        {class: 'tabs is-centered is-boxed', $components: [\n          {$type: 'ul', $components: Object.entries(this._filters).map(filter => Tab({name: filter[1], active: this._currentFilter === filter[0]}))}\n        ]}\n      ]\n    }\n  }\n}\n\nconst SearchBar = function() {\n  return {\n    $cell: true,\n    id: 'search-bar',\n    class: 'container field',\n    oninput: function(e) {\n      document.querySelector('#app')._searchFilter = e.target.value\n    },\n    $components: [{$type: 'p', class: 'control has-icons-left', $components: [\n      {$type: 'input', class: 'input', type: 'text', placeholder: 'Search'},\n      {$type: 'span', class: 'icon is-small is-left', $components: [\n        {$type: 'i', class: 'fa fa-search'}\n      ]}\n    ]}]\n  }\n}\n\nconst zip = (a, b) => {\n    let zipped = []\n    a.forEach((v, i) => zipped.push(Object.assign({}, v, b[i])))\n\n    return zipped\n}\n\nconst getCardData = data => {\n  if (data.status === 404) {\n    const name = data.message.replace('User \"', '').replace('\" was not found', '');\n\n    return {src: DEFAULT_AVATAR, alt: name, name, username: `@${name}`, active: false, bio: `${data.message}.`, streaming: null}\n  }\n\n  return {src: data.logo || DEFAULT_AVATAR, alt: data.name, name: data.display_name, username: `@${data.name}`, active: !!data.stream, bio: data.bio || \"Twitch Streamer.\", streaming: !!data.stream ? data.stream.channel.status : null}\n}\n\nconst App = function(list) {\n  return {\n    $cell: true,\n    id: 'app',\n    _fullList: [],\n    _list: [],\n    _searchFilter: '',\n    _currentFilter: ALL,\n    _refresh: function() {\n      Promise.all(ENDPOINTS.map(endpoint => Promise.all(list.map(user => fetch(`${endpoint}/${user}`).then(res => res.json()))))).then(values => {\n        this._fullList = zip(values[0], values[1]).map(getCardData)\n        this.$update()\n      })\n    },\n    $init: function() {\n      this._refresh()\n    },\n    $update: function() {\n      this._list = this._fullList.filter(v => v.alt.includes(this._searchFilter.toLowerCase()) && TAB_DECISIONS[this._currentFilter][(v.streaming === null) & 1])\n      this.$components = [TabList(TABS), StreamerList()]\n    }\n  }\n}\n\nvar search = SearchBar()\nvar root = App(STREAMER_LIST)\n"]}